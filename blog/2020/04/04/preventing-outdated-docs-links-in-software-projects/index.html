<!DOCTYPE html>
<html lang="en-us">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title> Preventing outdated docs links in software projects | joonas.fi</title>
  <meta name="description" content="Let‚Äôs get to work ·ïï( ·êõ )·ïó">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="robots" content="all,follow">
  <meta name="googlebot" content="index,follow,snippet,archive">
  <meta property="og:title" content="Preventing outdated docs links in software projects" />
<meta property="og:description" content="When I started making documentation for Varasto, I thought about the numerous times I&rsquo;ve seen projects with links to documentation that have resulted in a 404. I think I came up with a cool way to help with the issue.
tl;dr: typesafe documentation links are checked by the compilers on backend and frontend!
Motivation To build motivation first, let&rsquo;s first look at the benefits and results!
In my frontend (TypeScript &#43; React-based) I can link to GitHub&rsquo;s view of a Markdown doc like this:" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://joonas.fi/2020/04/04/preventing-outdated-docs-links-in-software-projects/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2020-04-04T11:40:00+00:00" />
<meta property="article:modified_time" content="2020-04-04T11:40:00+00:00" />

  <meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Preventing outdated docs links in software projects"/>
<meta name="twitter:description" content="When I started making documentation for Varasto, I thought about the numerous times I&rsquo;ve seen projects with links to documentation that have resulted in a 404. I think I came up with a cool way to help with the issue.
tl;dr: typesafe documentation links are checked by the compilers on backend and frontend!
Motivation To build motivation first, let&rsquo;s first look at the benefits and results!
In my frontend (TypeScript &#43; React-based) I can link to GitHub&rsquo;s view of a Markdown doc like this:"/>

  
  
  
  <link rel="stylesheet" href="/css/style-white.css">
  
   <link rel="stylesheet" href="/css/custom.css"> 
  
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
  

  <link rel="icon" type="image/png" href="/favicon.ico" />
  
  
  
  
  
    
<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
	ga('create', 'UA-24122659-1', 'auto');
	
	ga('send', 'pageview');
}
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>

  
  
</head>

<body class="max-width mx-auto px3 ltr">
  <div class="content index py4">

  <div id="header-post">
  <a id="menu-icon" href="#"><i class="fas fa-bars fa-lg"></i></a>
  <a id="menu-icon-tablet" href="#"><i class="fas fa-bars fa-lg"></i></a>
  <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fas fa-chevron-up fa-lg"></i></a>
  <span id="menu">
    <span id="nav">
      <ul>
         
        <li><a href="/">Home</a></li>
         
        <li><a href="/today-i-learned/">Today I Learned</a></li>
         
        <li><a href="/about/">About</a></li>
         
        <li><a href="/contact/">Contact</a></li>
        
      </ul>
    </span>
    <br/>
    <span id="actions">
      <ul>
        
        <li>
          <a class="icon" href=" https://joonas.fi/2020/04/03/quick-primer-on-svg-paths/">
            <i class="fas fa-chevron-left" aria-hidden="true" onmouseover="$('#i-prev').toggle();" onmouseout="$('#i-prev').toggle();"></i>
          </a>
        </li>
        
        
        <li>
          <a class="icon" href="https://joonas.fi/2020/04/tracking-down-inefficiencies-in-parallelization/">
            <i class="fas fa-chevron-right" aria-hidden="true" onmouseover="$('#i-next').toggle();" onmouseout="$('#i-next').toggle();"></i>
          </a>
        </li>
        
        <li>
          <a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');">
            <i class="fas fa-chevron-up" aria-hidden="true" onmouseover="$('#i-top').toggle();" onmouseout="$('#i-top').toggle();"></i>
          </a>
        </li>
        <li>
          <a class="icon" href="#">
            <i class="fas fa-share-alt" aria-hidden="true" onmouseover="$('#i-share').toggle();" onmouseout="$('#i-share').toggle();" onclick="$('#share').toggle();return false;"></i>
          </a>
        </li>
      </ul>
      <span id="i-prev" class="info" style="display:none;">Previous post</span>
      <span id="i-next" class="info" style="display:none;">Next post</span>
      <span id="i-top" class="info" style="display:none;">Back to top</span>
      <span id="i-share" class="info" style="display:none;">Share post</span>
    </span>
    <br/>
    <div id="share" style="display: none">
      
      <ul>
  
  
    
  
  
  <li>
    <a class="icon" href="http://www.facebook.com/sharer.php?u=https%3a%2f%2fjoonas.fi%2f2020%2f04%2f04%2fpreventing-outdated-docs-links-in-software-projects%2f">
      <i class="fab fa-facebook " aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="https://twitter.com/share?url=https%3a%2f%2fjoonas.fi%2f2020%2f04%2f04%2fpreventing-outdated-docs-links-in-software-projects%2f&text=Preventing%20outdated%20docs%20links%20in%20software%20projects">
      <i class="fab fa-twitter " aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2fjoonas.fi%2f2020%2f04%2f04%2fpreventing-outdated-docs-links-in-software-projects%2f&title=Preventing%20outdated%20docs%20links%20in%20software%20projects">
      <i class="fab fa-linkedin " aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=https%3a%2f%2fjoonas.fi%2f2020%2f04%2f04%2fpreventing-outdated-docs-links-in-software-projects%2f&is_video=false&description=Preventing%20outdated%20docs%20links%20in%20software%20projects">
      <i class="fab fa-pinterest " aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="mailto:?subject=Preventing%20outdated%20docs%20links%20in%20software%20projects&body=Check out this article: https%3a%2f%2fjoonas.fi%2f2020%2f04%2f04%2fpreventing-outdated-docs-links-in-software-projects%2f">
      <i class="fas fa-envelope " aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="https://getpocket.com/save?url=https%3a%2f%2fjoonas.fi%2f2020%2f04%2f04%2fpreventing-outdated-docs-links-in-software-projects%2f&title=Preventing%20outdated%20docs%20links%20in%20software%20projects">
      <i class="fab fa-get-pocket " aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="http://reddit.com/submit?url=https%3a%2f%2fjoonas.fi%2f2020%2f04%2f04%2fpreventing-outdated-docs-links-in-software-projects%2f&title=Preventing%20outdated%20docs%20links%20in%20software%20projects">
      <i class="fab fa-reddit " aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="http://www.stumbleupon.com/submit?url=https%3a%2f%2fjoonas.fi%2f2020%2f04%2f04%2fpreventing-outdated-docs-links-in-software-projects%2f&title=Preventing%20outdated%20docs%20links%20in%20software%20projects">
      <i class="fab fa-stumbleupon " aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="http://digg.com/submit?url=https%3a%2f%2fjoonas.fi%2f2020%2f04%2f04%2fpreventing-outdated-docs-links-in-software-projects%2f&title=Preventing%20outdated%20docs%20links%20in%20software%20projects">
      <i class="fab fa-digg " aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="http://www.tumblr.com/share/link?url=https%3a%2f%2fjoonas.fi%2f2020%2f04%2f04%2fpreventing-outdated-docs-links-in-software-projects%2f&name=Preventing%20outdated%20docs%20links%20in%20software%20projects&description=When%20I%20started%20making%20documentation%20for%20Varasto%2c%20I%20thought%20about%20the%20numerous%20times%20I%26rsquo%3bve%20seen%20projects%20with%20links%20to%20documentation%20that%20have%20resulted%20in%20a%20404.%20I%20think%20I%20came%20up%20with%20a%20cool%20way%20to%20help%20with%20the%20issue.%0atl%3bdr%3a%20typesafe%20documentation%20links%20are%20checked%20by%20the%20compilers%20on%20backend%20and%20frontend%21%0aMotivation%20To%20build%20motivation%20first%2c%20let%26rsquo%3bs%20first%20look%20at%20the%20benefits%20and%20results%21%0aIn%20my%20frontend%20%28TypeScript%20%2b%20React-based%29%20I%20can%20link%20to%20GitHub%26rsquo%3bs%20view%20of%20a%20Markdown%20doc%20like%20this%3a">
      <i class="fab fa-tumblr " aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="https://news.ycombinator.com/submitlink?u=https%3a%2f%2fjoonas.fi%2f2020%2f04%2f04%2fpreventing-outdated-docs-links-in-software-projects%2f&t=Preventing%20outdated%20docs%20links%20in%20software%20projects">
      <i class="fab fa-hacker-news " aria-hidden="true"></i>
    </a>
  </li>
</ul>

    </div>
    <div id="toc">
      <nav id="TableOfContents">
  <ul>
    <li><a href="#motivation">Motivation</a></li>
    <li><a href="#how-does-it-look-like-in-code">How does it look like in code?</a></li>
    <li><a href="#code-generation-to-rescue">Code generation to rescue</a></li>
    <li><a href="#caveats">Caveats</a></li>
    <li><a href="#improving-the-idea-further">Improving the idea further</a></li>
  </ul>
</nav>
    </div>
  </span>
</div>

<div class="alert-warning">
	üö®
	<a href="https://www.reuters.com/world/europe/icc-says-may-investigate-possible-war-crimes-after-russian-invasion-ukraine-2022-02-25/">Putin is a war criminal</a>.
	<a href="https://arstechnica.com/science/2022/03/russia-attacked-ukrainian-hospitals-violating-humanitarian-law-who-says/">Russians are bombing hospitals</a>.
	üíîüá∫üá¶
</div>



  <article class="post" itemscope itemtype="http://schema.org/BlogPosting">
    <header>
    

      <h1 class="posttitle" itemprop="name headline">
        Preventing outdated docs links in software projects
      </h1>
      <div class="meta">
        
        <div class="postdate">
          
          <time datetime="2020-04-04 11:40:00 &#43;0000 UTC" itemprop="datePublished">2020-04-04</time>
          
        </div>
        
        
        <div class="article-tag">
            <i class="fas fa-tag"></i>
            
            
            <a class="tag-link" href="/tags/programming/" rel="tag">programming</a>
            
        </div>
        
      </div>
    </header>

  
    <div class="content" itemprop="articleBody">
      <p>When I started making documentation for <a href="https://github.com/function61/varasto">Varasto</a>,
I thought about the numerous times I&rsquo;ve seen projects with links to documentation that have
resulted in a 404. I think I came up with a cool way to help with the issue.</p>
<p>tl;dr: typesafe documentation links are checked by the compilers on backend and frontend!</p>
<h2 id="motivation">Motivation</h2>
<p>To build motivation first, let&rsquo;s first look at the benefits and results!</p>
<p>In my frontend (TypeScript + React-based) I can link to GitHub&rsquo;s view of a Markdown doc
like this:</p>
<p><img src="typesafedoclinks-ui.png" alt=""></p>
<p>The code from above picture looks like this:</p>
<div class="highlight"><pre tabindex="0" style="color:#4d4d4d;background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-typescript" data-lang="typescript"><span style="display:flex;"><span>&lt;<span style="color:#2c5dcd;font-weight:bold">p</span>&gt;
</span></span><span style="display:flex;"><span>  Please read at least the &lt;<span style="color:#2c5dcd;font-weight:bold">SmallWell</span>&gt;Summary&lt;/<span style="color:#2c5dcd;font-weight:bold">SmallWell</span>&gt; section <span style="color:#2c5dcd;font-weight:bold">of</span> docs<span style="color:#2c5dcd">:</span> <span style="color:#2c5dcd">&amp;</span>nbsp;
</span></span><span style="display:flex;"><span>  &lt;<span style="color:#2c5dcd;font-weight:bold">DocLink</span> <span style="color:#2c5dcd;font-style:italic">doc</span><span style="color:#2c5dcd">=</span>{DocRef.DocsSecurityEncryptionREADMEMd} /&gt;
</span></span><span style="display:flex;"><span>&lt;/<span style="color:#2c5dcd;font-weight:bold">p</span>&gt;
</span></span></code></pre></div><p>With this small trick, we get safe URLs in frontend and backend verified by the compilers
(assuming you&rsquo;re using typesafe programming languages). And by safe I mean that you cannot
make a docs URL that doesn&rsquo;t work - it&rsquo;d be a compile error!</p>
<h2 id="how-does-it-look-like-in-code">How does it look like in code?</h2>
<p>Here&rsquo;s the implementation for <code>DocLink</code>:</p>
<div class="highlight"><pre tabindex="0" style="color:#4d4d4d;background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-typescript" data-lang="typescript"><span style="display:flex;"><span><span style="color:#2c5dcd;font-weight:bold">import</span> { DocRef } <span style="color:#2c5dcd;font-weight:bold">from</span> <span style="color:#0c6">&#39;generated/stoserver/stoservertypes_types&#39;</span>;
</span></span><span style="display:flex;"><span><span style="color:#2c5dcd;font-weight:bold">import</span> <span style="color:#2c5dcd">*</span> <span style="color:#2c5dcd;font-weight:bold">as</span> React <span style="color:#2c5dcd;font-weight:bold">from</span> <span style="color:#0c6">&#39;react&#39;</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#2c5dcd;font-weight:bold">interface</span> DocLinkProps {
</span></span><span style="display:flex;"><span>  doc: <span style="color:#5918bb;font-weight:bold">DocRef</span>;
</span></span><span style="display:flex;"><span>  title?: <span style="color:#5918bb;font-weight:bold">string</span>;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span><span style="color:#2c5dcd;font-weight:bold">export</span> <span style="color:#2c5dcd;font-weight:bold">class</span> DocLink <span style="color:#2c5dcd;font-weight:bold">extends</span> React.Component&lt;<span style="color:#2c5dcd;font-weight:bold">DocLinkProps</span><span style="color:#fff;background-color:#c00">,</span> {}&gt; {
</span></span><span style="display:flex;"><span>  render() {
</span></span><span style="display:flex;"><span>  <span style="color:#2c5dcd;font-weight:bold">const</span> url <span style="color:#2c5dcd">=</span> DocGitHubMaster(<span style="color:#2c5dcd;font-weight:bold">this</span>.props.doc);
</span></span><span style="display:flex;"><span>    <span style="color:#2c5dcd;font-weight:bold">return</span> &lt;<span style="color:#2c5dcd;font-weight:bold">a</span>
</span></span><span style="display:flex;"><span>      <span style="color:#2c5dcd;font-style:italic">href</span><span style="color:#2c5dcd">=</span>{url}
</span></span><span style="display:flex;"><span>      <span style="color:#2c5dcd;font-style:italic">title</span><span style="color:#2c5dcd">=</span>{<span style="color:#2c5dcd;font-weight:bold">this</span>.props.title}
</span></span><span style="display:flex;"><span>      <span style="color:#2c5dcd;font-style:italic">target</span><span style="color:#2c5dcd">=</span><span style="color:#0c6">&#34;_blank&#34;</span>&gt;
</span></span><span style="display:flex;"><span>      &lt;<span style="color:#2c5dcd;font-weight:bold">Glyphicon</span> <span style="color:#2c5dcd;font-style:italic">icon</span><span style="color:#2c5dcd">=</span><span style="color:#0c6">&#34;question-sign&#34;</span> /&gt;
</span></span><span style="display:flex;"><span>      {<span style="color:#2c5dcd;font-weight:bold">this</span>.props.title <span style="color:#2c5dcd">||</span> <span style="color:#0c6">&#39;&#39;</span>}
</span></span><span style="display:flex;"><span>    &lt;/<span style="color:#2c5dcd;font-weight:bold">a</span>&gt;;
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#2c5dcd;font-weight:bold">export</span> <span style="color:#2c5dcd;font-weight:bold">function</span> DocGitHubMaster(doc: <span style="color:#5918bb;font-weight:bold">DocRef</span>)<span style="color:#2c5dcd">:</span> <span style="color:#5918bb;font-weight:bold">string</span> {
</span></span><span style="display:flex;"><span>  <span style="color:#2c5dcd;font-weight:bold">return</span> <span style="color:#0c6">&#39;https://github.com/function61/varasto/blob/master/&#39;</span> <span style="color:#2c5dcd">+</span> doc;
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>If I need to make docs URLs in backend, it looks similar - like this:</p>
<div class="highlight"><pre tabindex="0" style="color:#4d4d4d;background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span>docreference.<span style="color:#ff8000;font-weight:bold">GitHubMaster</span>(stoservertypes.DocsSecurityEncryptionREADMEMd)
</span></span></code></pre></div><p>There&rsquo;s one addition in backend though: I also have a test that checks each enum member
actually exists as a file in the filesystem:</p>
<div class="highlight"><pre tabindex="0" style="color:#4d4d4d;background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#0080ff;font-style:italic">// tests that each for each member of DocRef (e.g. &#34;docs/example.md&#34;) a file exists. that
</span></span></span><span style="display:flex;"><span><span style="color:#0080ff;font-style:italic">// makes it possible for us to link to markdown view in GitHub with confidence that the URL
</span></span></span><span style="display:flex;"><span><span style="color:#0080ff;font-style:italic">// will not 404 if we move files around later and forget to update the ref
</span></span></span><span style="display:flex;"><span><span style="color:#0080ff;font-style:italic"></span><span style="color:#2c5dcd;font-weight:bold">func</span> <span style="color:#ff8000;font-weight:bold">TestDocsExistForDocRefs</span>(t <span style="color:#2c5dcd">*</span>testing.T) {
</span></span><span style="display:flex;"><span>  <span style="color:#2c5dcd;font-weight:bold">for</span> _, member <span style="color:#2c5dcd">:=</span> <span style="color:#2c5dcd;font-weight:bold">range</span> stoservertypes.DocRefMembers {
</span></span><span style="display:flex;"><span>    member <span style="color:#2c5dcd">:=</span> member <span style="color:#0080ff;font-style:italic">// pin
</span></span></span><span style="display:flex;"><span><span style="color:#0080ff;font-style:italic"></span>    t.<span style="color:#ff8000;font-weight:bold">Run</span>(<span style="color:#5918bb;font-weight:bold">string</span>(member), <span style="color:#2c5dcd;font-weight:bold">func</span>(t <span style="color:#2c5dcd">*</span>testing.T) {
</span></span><span style="display:flex;"><span>      exists, err <span style="color:#2c5dcd">:=</span> fileexists.<span style="color:#ff8000;font-weight:bold">Exists</span>(<span style="color:#0c6">&#34;../../&#34;</span> <span style="color:#2c5dcd">+</span> <span style="color:#5918bb;font-weight:bold">string</span>(member))
</span></span><span style="display:flex;"><span>      assert.<span style="color:#ff8000;font-weight:bold">Ok</span>(t, err)
</span></span><span style="display:flex;"><span>      assert.<span style="color:#ff8000;font-weight:bold">Assert</span>(t, exists)
</span></span><span style="display:flex;"><span>    })
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>NOTE: we&rsquo;ll later discuss improvements which would make the above check unnecessary.</p>
<h2 id="code-generation-to-rescue">Code generation to rescue</h2>
<p>In Varasto I already use quite a lot of code generation - so the idea came naturally for if
code generation could help with this issue.</p>
<p>I have a bunch of actual application-level data types in a JSON file. I added my documentation
files (relative to the repo‚Äôs root) as a string-enum there:</p>
<div class="highlight"><pre tabindex="0" style="color:#4d4d4d;background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>  <span style="color:#2c5dcd;font-weight:bold">&#34;enums&#34;</span>: [
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>      <span style="color:#2c5dcd;font-weight:bold">&#34;name&#34;</span>: <span style="color:#0c6">&#34;DocRef&#34;</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#2c5dcd;font-weight:bold">&#34;type&#34;</span>: <span style="color:#0c6">&#34;string&#34;</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#2c5dcd;font-weight:bold">&#34;stringMembers&#34;</span>: [
</span></span><span style="display:flex;"><span>        <span style="color:#0c6">&#34;README.md&#34;</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#0c6">&#34;docs/client/README.md&#34;</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#0c6">&#34;docs/googledrive/README.md&#34;</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#0c6">&#34;docs/replication-policies/README.md&#34;</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#0c6">&#34;docs/guide_network-folders.md&#34;</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#0c6">&#34;docs/guide_setting-up-backup.md&#34;</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#0c6">&#34;docs/guide_setting-up-local-fs.md&#34;</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#0c6">&#34;docs/guide_setting-up-s3.md&#34;</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#0c6">&#34;docs/guide_setting-up-smart-monitoring.md&#34;</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#0c6">&#34;docs/guide_storing-movies.md&#34;</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#0c6">&#34;docs/guide_storing-tvshows.md&#34;</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#0c6">&#34;docs/security_encryption/README.md&#34;</span>
</span></span><span style="display:flex;"><span>      ]
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>  ]
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>The autogenerated code for TypeScript looks like this:</p>
<div class="highlight"><pre tabindex="0" style="color:#4d4d4d;background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-typescript" data-lang="typescript"><span style="display:flex;"><span><span style="color:#2c5dcd;font-weight:bold">export</span> <span style="color:#2c5dcd;font-weight:bold">enum</span> DocRef {
</span></span><span style="display:flex;"><span>  READMEMd <span style="color:#2c5dcd">=</span> <span style="color:#0c6">&#39;README.md&#39;</span>,
</span></span><span style="display:flex;"><span>  DocsClientREADMEMd <span style="color:#2c5dcd">=</span> <span style="color:#0c6">&#39;docs/client/README.md&#39;</span>,
</span></span><span style="display:flex;"><span>  DocsGoogledriveREADMEMd <span style="color:#2c5dcd">=</span> <span style="color:#0c6">&#39;docs/googledrive/README.md&#39;</span>,
</span></span><span style="display:flex;"><span>  DocsReplicationPoliciesREADMEMd <span style="color:#2c5dcd">=</span> <span style="color:#0c6">&#39;docs/replication-policies/README.md&#39;</span>,
</span></span><span style="display:flex;"><span>  DocsGuideNetworkFoldersMd <span style="color:#2c5dcd">=</span> <span style="color:#0c6">&#39;docs/guide_network-folders.md&#39;</span>,
</span></span><span style="display:flex;"><span>  DocsGuideSettingUpBackupMd <span style="color:#2c5dcd">=</span> <span style="color:#0c6">&#39;docs/guide_setting-up-backup.md&#39;</span>,
</span></span><span style="display:flex;"><span>  DocsGuideSettingUpLocalFsMd <span style="color:#2c5dcd">=</span> <span style="color:#0c6">&#39;docs/guide_setting-up-local-fs.md&#39;</span>,
</span></span><span style="display:flex;"><span>  DocsGuideSettingUpS3Md <span style="color:#2c5dcd">=</span> <span style="color:#0c6">&#39;docs/guide_setting-up-s3.md&#39;</span>,
</span></span><span style="display:flex;"><span>  DocsGuideSettingUpSmartMonitoringMd <span style="color:#2c5dcd">=</span> <span style="color:#0c6">&#39;docs/guide_setting-up-smart-monitoring.md&#39;</span>,
</span></span><span style="display:flex;"><span>  DocsGuideStoringMoviesMd <span style="color:#2c5dcd">=</span> <span style="color:#0c6">&#39;docs/guide_storing-movies.md&#39;</span>,
</span></span><span style="display:flex;"><span>  DocsGuideStoringTvshowsMd <span style="color:#2c5dcd">=</span> <span style="color:#0c6">&#39;docs/guide_storing-tvshows.md&#39;</span>,
</span></span><span style="display:flex;"><span>  DocsSecurityEncryptionREADMEMd <span style="color:#2c5dcd">=</span> <span style="color:#0c6">&#39;docs/security_encryption/README.md&#39;</span>,
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>The backend is similar - I won&rsquo;t bother pasting it here.</p>
<p>The trick that makes this work is that when using a typesafe language, if I refer to
<code>DocRef.SomethingThatDoesNotExist</code>, the compiler will know it&rsquo;s not a valid member of that
enum (= not a valid path to an existing document), and it will produce an error.</p>
<h2 id="caveats">Caveats</h2>
<ul>
<li>Obviously this only works if your code and documentation live in the same repo since this
is what&rsquo;s needed to make atomic commits to both the code and docs at the same time.</li>
<li>You don&rsquo;t need GitHub to view the docs with this idea, but it&rsquo;s the easiest way to render
Markdown docs and images.
<ul>
<li>You could have some custom docs site built from your repo but you&rsquo;d have to tweak the
URL building for where your actual docs will be published at, and you&rsquo;d have to build
version-aware docs yourself if you like the idea we&rsquo;ll discuss below.</li>
</ul>
</li>
</ul>
<h2 id="improving-the-idea-further">Improving the idea further</h2>
<p>There&rsquo;s plenty of ways this can be improved:</p>
<ul>
<li>Versioned links come for free - if you have access to commit ID from your code, you can
automatically add it to the GitHub URL and thus always link to the correct version of docs.
If your user doesn&rsquo;t run the latest version of your software and a newer version has a doc
file moved/removed or changed in a way that conflicts with an older version, this small
trick fixes it!</li>
<li>We could scan for <code>docs/*.md</code> files and not have to keep the enum, that I used for
autogeneration, updated manually. This would also remove the need for the backend test
checking that the file exists.
<ul>
<li>If we scan <code>docs/</code> folder, could as well parse the <code>.md</code> files for their heading
structure, so we could make <code>&lt;DocLink ref={DocRef.READMEmd} /&gt;</code> automatically display
up-to-date title for the document.</li>
<li>Bonus feature for the above idea is that once we know the heading structure, we could
even make typesafe deep links to subsections now being aware of the URL anchors.</li>
</ul>
</li>
</ul>

    </div>
	<div class="post-footer">
		<hr />

		<img src="/signature.png" alt="signature" style="height: 55px;" />

		<p>Thanks for reading! <span style="font-style: normal;">üòç</span></p>
		<p>
			If you like my writing, consider following me on
			<a href="https://twitter.com/joonas_fi">Twitter</a>.
		</p>

		<p>
			Stay updated on my blog posts &amp; projects - sign up for
			<a href="https://buttondown.email/joonas">my newsletter</a>. üöÄ
			<br />
			<small>
				No spam, unsubscribe any time.
				<a href="/feed.xml">RSS</a> also available.
			</small>
		</p>
	</div>
  </article>

  <hr />

  
<div id="disqus_thread"></div>
<script type="text/javascript">

var disqus_identifier = '\/2020\/04\/04\/preventing-outdated-docs-links-in-software-projects';

(function() {
   if (window.location.hostname.indexOf('.dev.fn61.net') != -1) {
        document.getElementById('disqus_thread').innerHTML = 'Disqus comments not available by default when the website is previewed locally.';
        return;
    }

    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
    var disqus_shortname = 'joonas-fi';
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
})();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="https://disqus.com/" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>


  
  

  <div id="footer-post-container">
  <div id="footer-post">

    <div id="nav-footer" style="display: none">
      <ul>
         
          <li><a href="/">Home</a></li>
         
          <li><a href="/today-i-learned/">Today I Learned</a></li>
         
          <li><a href="/about/">About</a></li>
         
          <li><a href="/contact/">Contact</a></li>
        
      </ul>
    </div>

    <div id="toc-footer" style="display: none">
      <nav id="TableOfContents">
  <ul>
    <li><a href="#motivation">Motivation</a></li>
    <li><a href="#how-does-it-look-like-in-code">How does it look like in code?</a></li>
    <li><a href="#code-generation-to-rescue">Code generation to rescue</a></li>
    <li><a href="#caveats">Caveats</a></li>
    <li><a href="#improving-the-idea-further">Improving the idea further</a></li>
  </ul>
</nav>
    </div>

    <div id="share-footer" style="display: none">
      
      <ul>
  
  
    
  
  
  <li>
    <a class="icon" href="http://www.facebook.com/sharer.php?u=https%3a%2f%2fjoonas.fi%2f2020%2f04%2f04%2fpreventing-outdated-docs-links-in-software-projects%2f">
      <i class="fab fa-facebook fa-lg" aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="https://twitter.com/share?url=https%3a%2f%2fjoonas.fi%2f2020%2f04%2f04%2fpreventing-outdated-docs-links-in-software-projects%2f&text=Preventing%20outdated%20docs%20links%20in%20software%20projects">
      <i class="fab fa-twitter fa-lg" aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2fjoonas.fi%2f2020%2f04%2f04%2fpreventing-outdated-docs-links-in-software-projects%2f&title=Preventing%20outdated%20docs%20links%20in%20software%20projects">
      <i class="fab fa-linkedin fa-lg" aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=https%3a%2f%2fjoonas.fi%2f2020%2f04%2f04%2fpreventing-outdated-docs-links-in-software-projects%2f&is_video=false&description=Preventing%20outdated%20docs%20links%20in%20software%20projects">
      <i class="fab fa-pinterest fa-lg" aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="mailto:?subject=Preventing%20outdated%20docs%20links%20in%20software%20projects&body=Check out this article: https%3a%2f%2fjoonas.fi%2f2020%2f04%2f04%2fpreventing-outdated-docs-links-in-software-projects%2f">
      <i class="fas fa-envelope fa-lg" aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="https://getpocket.com/save?url=https%3a%2f%2fjoonas.fi%2f2020%2f04%2f04%2fpreventing-outdated-docs-links-in-software-projects%2f&title=Preventing%20outdated%20docs%20links%20in%20software%20projects">
      <i class="fab fa-get-pocket fa-lg" aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="http://reddit.com/submit?url=https%3a%2f%2fjoonas.fi%2f2020%2f04%2f04%2fpreventing-outdated-docs-links-in-software-projects%2f&title=Preventing%20outdated%20docs%20links%20in%20software%20projects">
      <i class="fab fa-reddit fa-lg" aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="http://www.stumbleupon.com/submit?url=https%3a%2f%2fjoonas.fi%2f2020%2f04%2f04%2fpreventing-outdated-docs-links-in-software-projects%2f&title=Preventing%20outdated%20docs%20links%20in%20software%20projects">
      <i class="fab fa-stumbleupon fa-lg" aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="http://digg.com/submit?url=https%3a%2f%2fjoonas.fi%2f2020%2f04%2f04%2fpreventing-outdated-docs-links-in-software-projects%2f&title=Preventing%20outdated%20docs%20links%20in%20software%20projects">
      <i class="fab fa-digg fa-lg" aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="http://www.tumblr.com/share/link?url=https%3a%2f%2fjoonas.fi%2f2020%2f04%2f04%2fpreventing-outdated-docs-links-in-software-projects%2f&name=Preventing%20outdated%20docs%20links%20in%20software%20projects&description=When%20I%20started%20making%20documentation%20for%20Varasto%2c%20I%20thought%20about%20the%20numerous%20times%20I%26rsquo%3bve%20seen%20projects%20with%20links%20to%20documentation%20that%20have%20resulted%20in%20a%20404.%20I%20think%20I%20came%20up%20with%20a%20cool%20way%20to%20help%20with%20the%20issue.%0atl%3bdr%3a%20typesafe%20documentation%20links%20are%20checked%20by%20the%20compilers%20on%20backend%20and%20frontend%21%0aMotivation%20To%20build%20motivation%20first%2c%20let%26rsquo%3bs%20first%20look%20at%20the%20benefits%20and%20results%21%0aIn%20my%20frontend%20%28TypeScript%20%2b%20React-based%29%20I%20can%20link%20to%20GitHub%26rsquo%3bs%20view%20of%20a%20Markdown%20doc%20like%20this%3a">
      <i class="fab fa-tumblr fa-lg" aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="https://news.ycombinator.com/submitlink?u=https%3a%2f%2fjoonas.fi%2f2020%2f04%2f04%2fpreventing-outdated-docs-links-in-software-projects%2f&t=Preventing%20outdated%20docs%20links%20in%20software%20projects">
      <i class="fab fa-hacker-news fa-lg" aria-hidden="true"></i>
    </a>
  </li>
</ul>

    </div>

    <div id="actions-footer">
      
        <a id="menu" class="icon" href="#" onclick="$('#nav-footer').toggle();return false;">
          <i class="fas fa-bars fa-lg" aria-hidden="true"></i> Menu</a>
        <a id="toc" class="icon" href="#" onclick="$('#toc-footer').toggle();return false;">
          <i class="fas fa-list fa-lg" aria-hidden="true"></i> TOC</a>
        <a id="share" class="icon" href="#" onclick="$('#share-footer').toggle();return false;">
          <i class="fas fa-share-alt fa-lg" aria-hidden="true"></i> share</a>
        <a id="top" style="display:none" class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');">
          <i class="fas fa-chevron-up fa-lg" aria-hidden="true"></i> Top</a>
    </div>

  </div>
</div>


  <footer id="footer">
  <div class="footer-left">
    Copyright  &copy; 2023  joonas.fi 
  </div>
  <div class="footer-right">
    <nav>
      <ul>
         
        <li><a href="/">Home</a></li>
         
        <li><a href="/today-i-learned/">Today I Learned</a></li>
         
        <li><a href="/about/">About</a></li>
         
        <li><a href="/contact/">Contact</a></li>
        
      </ul>
    </nav>
  </div>
</footer>


  </div>
</body>

<link rel="stylesheet" href=/lib/font-awesome/css/all.min.css>
<script src=/lib/jquery/jquery.min.js></script>
<script src=/js/main.js></script>



</html>
