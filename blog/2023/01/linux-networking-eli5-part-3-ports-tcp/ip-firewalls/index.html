<!DOCTYPE html>
<html lang="en-us">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title> Linux Networking ELI5 — Part 3, Ports, TCP/IP &amp; Firewalls | tunacici</title>
  <meta name="description" content="Enjoy Life!">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="robots" content="all,follow">
  <meta name="googlebot" content="index,follow,snippet,archive">
  <meta property="og:title" content="Linux Networking ELI5 — Part 3, Ports, TCP/IP &amp; Firewalls" />
<meta property="og:description" content="Welcome to the part 3 of my Linux Networking ELI5 series! In the previous article, we have talked about IP addresses, the idea behind the NAT and DHCP servers.
Today’s stars are TCP/IP model, ports and firewalls. We will try to answer what they are, how do they work and how to use them in our Linux machines. Unlike the previous articles, this one will be more software centric. Meaning, there will be many terminal commands and practical examples." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://tunacici.com/blog/2023/01/linux-networking-eli5-part-3-ports-tcp/ip-firewalls/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-01-30T00:00:00+00:00" />
<meta property="article:modified_time" content="2023-01-30T00:00:00+00:00" />

  <meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Linux Networking ELI5 — Part 3, Ports, TCP/IP &amp; Firewalls"/>
<meta name="twitter:description" content="Welcome to the part 3 of my Linux Networking ELI5 series! In the previous article, we have talked about IP addresses, the idea behind the NAT and DHCP servers.
Today’s stars are TCP/IP model, ports and firewalls. We will try to answer what they are, how do they work and how to use them in our Linux machines. Unlike the previous articles, this one will be more software centric. Meaning, there will be many terminal commands and practical examples."/>

  
  
    
  
  
  <link rel="stylesheet" href="/blog/css/style-white.css">
  
   <link rel="stylesheet" href="/blog/css/custom.css"> 
  
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
  

  <link rel="icon" type="image/png" href="/favicon.ico" />
  
  
</head>

<body class="max-width mx-auto px3 ltr">
  <div class="content index py4">

  <div id="header-post">
  <a id="menu-icon" href="#"><i class="fas fa-bars fa-lg"></i></a>
  <a id="menu-icon-tablet" href="#"><i class="fas fa-bars fa-lg"></i></a>
  <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fas fa-chevron-up fa-lg"></i></a>
  <span id="menu">
    <span id="nav">
      <ul>
         
        <li><a href="/blog/">Home</a></li>
         
        <li><a href="/blog/memes/">Memes</a></li>
         
        <li><a href="/blog/about/">About</a></li>
         
        <li><a href="/blog/contact/">Contact</a></li>
         
        <li><a href="https://tunacici.com/terminal/">Terminal</a></li>
        
      </ul>
    </span>
    <br/>
    <span id="actions">
      <ul>
        
        <li>
          <a class="icon" href=" https://tunacici.com/blog/2023/01/linux-networking-eli5-part-2-ip-nat-dhcp/">
            <i class="fas fa-chevron-left" aria-hidden="true" onmouseover="$('#i-prev').toggle();" onmouseout="$('#i-prev').toggle();"></i>
          </a>
        </li>
        
        
        <li>
          <a class="icon" href="https://tunacici.com/blog/2023/02/linux-networking-eli5-part-4-minecraft-web-server/">
            <i class="fas fa-chevron-right" aria-hidden="true" onmouseover="$('#i-next').toggle();" onmouseout="$('#i-next').toggle();"></i>
          </a>
        </li>
        
        <li>
          <a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');">
            <i class="fas fa-chevron-up" aria-hidden="true" onmouseover="$('#i-top').toggle();" onmouseout="$('#i-top').toggle();"></i>
          </a>
        </li>
        <li>
          <a class="icon" href="#">
            <i class="fas fa-share-alt" aria-hidden="true" onmouseover="$('#i-share').toggle();" onmouseout="$('#i-share').toggle();" onclick="$('#share').toggle();return false;"></i>
          </a>
        </li>
      </ul>
      <span id="i-prev" class="info" style="display:none;">Previous post</span>
      <span id="i-next" class="info" style="display:none;">Next post</span>
      <span id="i-top" class="info" style="display:none;">Back to top</span>
      <span id="i-share" class="info" style="display:none;">Share post</span>
    </span>
    <br/>
    <div id="share" style="display: none">
      
      <ul>
  
  
    
  
  
  <li>
    <a class="icon" href="http://www.facebook.com/sharer.php?u=https%3a%2f%2ftunacici.com%2fblog%2f2023%2f01%2flinux-networking-eli5-part-3-ports-tcp%2fip-firewalls%2f">
      <i class="fab fa-facebook " aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="https://twitter.com/share?url=https%3a%2f%2ftunacici.com%2fblog%2f2023%2f01%2flinux-networking-eli5-part-3-ports-tcp%2fip-firewalls%2f&text=Linux%20Networking%20ELI5%20%e2%80%94%20Part%203%2c%20Ports%2c%20TCP%2fIP%20%26%20Firewalls">
      <i class="fab fa-twitter " aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2ftunacici.com%2fblog%2f2023%2f01%2flinux-networking-eli5-part-3-ports-tcp%2fip-firewalls%2f&title=Linux%20Networking%20ELI5%20%e2%80%94%20Part%203%2c%20Ports%2c%20TCP%2fIP%20%26%20Firewalls">
      <i class="fab fa-linkedin " aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=https%3a%2f%2ftunacici.com%2fblog%2f2023%2f01%2flinux-networking-eli5-part-3-ports-tcp%2fip-firewalls%2f&is_video=false&description=Linux%20Networking%20ELI5%20%e2%80%94%20Part%203%2c%20Ports%2c%20TCP%2fIP%20%26%20Firewalls">
      <i class="fab fa-pinterest " aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="mailto:?subject=Linux%20Networking%20ELI5%20%e2%80%94%20Part%203%2c%20Ports%2c%20TCP%2fIP%20%26%20Firewalls&body=Check out this article: https%3a%2f%2ftunacici.com%2fblog%2f2023%2f01%2flinux-networking-eli5-part-3-ports-tcp%2fip-firewalls%2f">
      <i class="fas fa-envelope " aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="https://getpocket.com/save?url=https%3a%2f%2ftunacici.com%2fblog%2f2023%2f01%2flinux-networking-eli5-part-3-ports-tcp%2fip-firewalls%2f&title=Linux%20Networking%20ELI5%20%e2%80%94%20Part%203%2c%20Ports%2c%20TCP%2fIP%20%26%20Firewalls">
      <i class="fab fa-get-pocket " aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="http://reddit.com/submit?url=https%3a%2f%2ftunacici.com%2fblog%2f2023%2f01%2flinux-networking-eli5-part-3-ports-tcp%2fip-firewalls%2f&title=Linux%20Networking%20ELI5%20%e2%80%94%20Part%203%2c%20Ports%2c%20TCP%2fIP%20%26%20Firewalls">
      <i class="fab fa-reddit " aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="http://www.stumbleupon.com/submit?url=https%3a%2f%2ftunacici.com%2fblog%2f2023%2f01%2flinux-networking-eli5-part-3-ports-tcp%2fip-firewalls%2f&title=Linux%20Networking%20ELI5%20%e2%80%94%20Part%203%2c%20Ports%2c%20TCP%2fIP%20%26%20Firewalls">
      <i class="fab fa-stumbleupon " aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="http://digg.com/submit?url=https%3a%2f%2ftunacici.com%2fblog%2f2023%2f01%2flinux-networking-eli5-part-3-ports-tcp%2fip-firewalls%2f&title=Linux%20Networking%20ELI5%20%e2%80%94%20Part%203%2c%20Ports%2c%20TCP%2fIP%20%26%20Firewalls">
      <i class="fab fa-digg " aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="http://www.tumblr.com/share/link?url=https%3a%2f%2ftunacici.com%2fblog%2f2023%2f01%2flinux-networking-eli5-part-3-ports-tcp%2fip-firewalls%2f&name=Linux%20Networking%20ELI5%20%e2%80%94%20Part%203%2c%20Ports%2c%20TCP%2fIP%20%26%20Firewalls&description=Welcome%20to%20the%20part%203%20of%20my%20Linux%20Networking%20ELI5%20series%21%20In%20the%20previous%20article%2c%20we%20have%20talked%20about%20IP%20addresses%2c%20the%20idea%20behind%20the%20NAT%20and%20DHCP%20servers.%0aToday%e2%80%99s%20stars%20are%20TCP%2fIP%20model%2c%20ports%20and%20firewalls.%20We%20will%20try%20to%20answer%20what%20they%20are%2c%20how%20do%20they%20work%20and%20how%20to%20use%20them%20in%20our%20Linux%20machines.%20Unlike%20the%20previous%20articles%2c%20this%20one%20will%20be%20more%20software%20centric.%20Meaning%2c%20there%20will%20be%20many%20terminal%20commands%20and%20practical%20examples.">
      <i class="fab fa-tumblr " aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="https://news.ycombinator.com/submitlink?u=https%3a%2f%2ftunacici.com%2fblog%2f2023%2f01%2flinux-networking-eli5-part-3-ports-tcp%2fip-firewalls%2f&t=Linux%20Networking%20ELI5%20%e2%80%94%20Part%203%2c%20Ports%2c%20TCP%2fIP%20%26%20Firewalls">
      <i class="fab fa-hacker-news " aria-hidden="true"></i>
    </a>
  </li>
</ul>

    </div>
    <div id="toc">
      <nav id="TableOfContents">
  <ul>
    <li><a href="#udp">UDP</a></li>
    <li><a href="#tcp">TCP</a></li>
  </ul>

  <ul>
    <li><a href="#ufw">ufw</a></li>
    <li><a href="#testing-rules-for-ip-address-192168150">Testing Rules For IP Address 192.168.1.50</a></li>
    <li><a href="#testing-rules-for-ip-address-192168175">Testing Rules For IP Address 192.168.1.75</a></li>
  </ul>
</nav>
    </div>
  </span>
</div>

<div class="alert-warning">
	💚	
	<a href="https://github.com/TunaCici/Braavos">Braavos is finally out! - 14 Aug 2023</a>
	💚
</div>



  <article class="post" itemscope itemtype="http://schema.org/BlogPosting">
    <header>
    
      <img src="header.png" class="hero" alt="Displaying Active Ports And The Status of The Firewall in Linux)" />
    

      <h1 class="posttitle" itemprop="name headline">
        Linux Networking ELI5 — Part 3, Ports, TCP/IP &amp; Firewalls
      </h1>
      <div class="meta">
        
        <div class="postdate">
          
          <time datetime="2023-01-30 00:00:00 &#43;0000 UTC" itemprop="datePublished">2023-01-30</time>
          
        </div>
        
        
        <div class="article-tag">
            <i class="fas fa-tag"></i>
            
            
            <a class="tag-link" href="/tags/linux/" rel="tag">linux</a>
            
             ,  
            <a class="tag-link" href="/tags/networking/" rel="tag">networking</a>
            
             ,  
            <a class="tag-link" href="/tags/eli5/" rel="tag">eli5</a>
            
        </div>
        
      </div>
    </header>

  
    <div class="content" itemprop="articleBody">
      <p>Welcome to the part 3 of my Linux Networking ELI5 series! In the previous article, we have talked about IP addresses, the idea behind the NAT and DHCP servers.</p>
<p>Today’s stars are TCP/IP model, ports and firewalls. We will try to answer what they are, how do they work and how to use them in our Linux machines. Unlike the previous articles, this one will be more software centric. Meaning, there will be many terminal commands and practical examples.</p>
<p>If you have missed the previous parts you can check them out from the using the links below.</p>
<p><a href="https://medium.com/@tunacici7/linux-networking-eli5-part-1-networks-interfaces-b912826d699b">Navigate to Part 1 — Networks &amp; Interfaces</a></p>
<p><a href="https://medium.com/@tunacici7/linux-networking-eli5-part-2-ip-nat-dhcp-c1af98046654">Navigate to Part 2 — IP, NAT &amp; DHCP</a></p>
<p><a href="https://medium.com/@tunacici7/linux-networking-eli5-part-3-ports-tcp-ip-firewalls-73f17cb54ed8">Navigate to Part 3 — Ports, TCP/UDP &amp; Firewalls</a></p>
<p><a href="https://medium.com/@tunacici7/linux-networking-eli5-part-4-minecraft-web-server-f0791b6318d0">Navigate to Part 4 — Minecraft &amp; HTTP Server</a></p>
<h1 id="tldr">TLDR;</h1>
<div class="highlight"><pre tabindex="0" style="color:#4d4d4d;background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>TCP/IP Model: An architecture that is used when sending packets through a network  
</span></span><span style="display:flex;"><span>  
</span></span><span style="display:flex;"><span>Application Layer: Represents the type/protocol of a packet (ex. HTTP)  
</span></span><span style="display:flex;"><span>Transport Layer: Represents the method/protocol used for delivering a packet (ex. UDP)  
</span></span><span style="display:flex;"><span>Internet Layer: Represents the protocol used for routing a packet in a network (ex. IP)
</span></span><span style="display:flex;"><span>Network Access Layer: Represents the hardware used for delivering a packet (ex. Wi-Fi)  
</span></span><span style="display:flex;"><span>  
</span></span><span style="display:flex;"><span>Ports: Virtual sockets that allows an IP to be used by many software apps in an OS  
</span></span><span style="display:flex;"><span>ss: A Linux command that is used to monitor ports  
</span></span><span style="display:flex;"><span>  
</span></span><span style="display:flex;"><span>UDP: A protocol that delivers packets without any checks (fast, but not realiable))  
</span></span><span style="display:flex;"><span>TCP: A protocol that delivers packets in a controlled way (slower, but reliable)  
</span></span><span style="display:flex;"><span>WireShark: A program that is used to monitor packets for a network interface  
</span></span><span style="display:flex;"><span>  
</span></span><span style="display:flex;"><span>Firewall: A software/hardware layer that filters incoming/outgoing packets in an OS
</span></span></code></pre></div><h1 id="the-setup">The Setup</h1>
<p>I have setup an example network using my personal machines (local &amp; cloud). This way I can give better visual examples and help you in this journey.</p>
<p><img src="my-network-setup.png" alt=""></p>
<p>My Basic Network Setup</p>
<p>I have two local machines that are connected to each other via my home router. One machine is Apple’s Macbook Pro running macOS Ventura 13.1 and the other one is my faithful Raspberry Pi 4b running Ubuntu Server 22.04.</p>
<p>I also have an Oracle Cloud machine running the same os as my Raspberry: Ubuntu Server 22.04. I hid it’s public IP address due to privacy and security concerns.</p>
<h1 id="a-story">A Story</h1>
<p>I want you to do something. Imagine that you are the captain of a big ship. You travel across oceans to deliver valuable cargo. You visit many different countries. UK, Italy, Greece, India, Japan… you name it.</p>
<p>Now, every time you visit one, you park your ship on that country’s port. You load up the cargo and departure from the port to begin your journey. After crossing the ocean and fighting with big waves, you finally arrive at the destination country and park your ship at it’s port. The crew there then will unload your cargo and in the end you will get your reward (sweet money)!</p>
<p><img src="cargo-ship.jpeg" alt=""></p>
<p>A Cargo Ship Approaching the Port — Source: unsplash.com by william07</p>
<p>Let’s simplify this journey by making a step-by-step analysis.</p>
<ol>
<li>Load the cargo onto the ship (Application &amp; IP Layer)</li>
<li>Departure from the port (Transportation Layer)</li>
<li>Journey through oceans and big waves (Network Access Layer)</li>
<li>Arrive at the destination port (Transportation Layer)</li>
<li>Unload the cargo from the ship (Application &amp; IP Layer)</li>
<li>Get rewarded! (Packet Recieved!)</li>
</ol>
<blockquote>
<p>I want you to come back to this story, when you have finished reading this article;)</p>
</blockquote>
<p>Now, these steps are important and will guide us throughout this article when we are talking about ports, firewalls and many more. I will make direct comparisons to this story and hope that it will make you understand everything better.</p>
<h1 id="tcpip-model">TCP/IP Model</h1>
<p>Following from the previous articles, we learned networks and successfully joined them. Now, it’s time to connect to other devices and do some networking.</p>
<p>When we talk to other devices in a network, we send them messages called <strong>packets</strong>. These packets can be a simple text like ‘Hello Jon’, an encrypted username and password for your Reddit login or a photo that you want to post on Instagram. Whatever the type of the message, they are all treated as packets in a network.</p>
<p>To send a packet through the network, we need to <strong>package them</strong> so the Linux can know how and <em>where</em> to send it. There are many packaging that happens to your packets before they are sent over the network. First, check out the below picture.</p>
<p><img src="tcp-ip-model.jpeg" alt=""></p>
<p>TCP/IP Model (Middle) — Source: imperva.com</p>
<blockquote>
<p>This picture is a VERY POPULAR networking model that shows us how our packet is packaged and sent over the network. For the ELI5 purposes we will focus on the TCP/IP model. And go over each of these 4 layers.</p>
<p>Think of the TCP/IP model as a guideline for ship captains. We need to know about this model in order to get our captain license!</p>
</blockquote>
<h1 id="ports-application-layer">Ports (Application Layer)</h1>
<p>How you ever wondered how you can browse, watch Netflix, play online games and all kinds of networking stuff WHILE using a single IP address? How is that my Spotify stream is not mixing up with my Overwatch game? Well, the answer is ports!</p>
<p><img src="multiple-ports-same-ip.png" alt=""></p>
<p>I Can Stream Music, Download a File and Play Online Games Using The Same IP</p>
<p>Ports are network endpoints in Linux (and other operating systems). Linux assigns ports to each IP address in order to separate programs that uses the same IP address. For example; 2 different programs can use the same IP address, but they will use 2 different ports so that their connections are not mixed together.</p>
<blockquote>
<p>Think of our ‘captain’ story. There can be many ports in a country. One port can be used for delivering cars and other can be for food and etc.</p>
<p>You can’t unload a Bugatti cargo to a fishing port.</p>
</blockquote>
<p>Ports are numbered from 0 to 65535. So in total, we have 65535 different ports to choose from and each one of them is used for a different purpose. Here’s some of the most commonly used ports numbers.</p>
<div class="highlight"><pre tabindex="0" style="color:#4d4d4d;background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>21: Used for transfering files (FTP)  
</span></span><span style="display:flex;"><span>22: Used for secure shell connections (SSH)  
</span></span><span style="display:flex;"><span>80: Used for browsing the web (HTTP)  
</span></span><span style="display:flex;"><span>443: Used for securily browsing the web (HTTPS)  
</span></span><span style="display:flex;"><span>587: Used for sending/recieving emails (SMTP)
</span></span></code></pre></div><p>Depending on the application’s purpose (web server, game server) different ports will be used. For example; almost all web servers uses the port number 443 or a typical Minecraft server will be using the port number 25565. But there are so many different ports, how do we choose which one to use?</p>
<p>There are currently 3 categories for port numbers. These are:</p>
<div class="highlight"><pre tabindex="0" style="color:#4d4d4d;background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>0 - 1023: Most commonly used ports (HTTPS, FTP, SSH and etc)  
</span></span><span style="display:flex;"><span>1024 - 49151: Custom ports for specific apps (Game servers, Video streamning)  
</span></span><span style="display:flex;"><span>49152 - 65535: Dynamic ports for temporary connnections (When requesting smth.)
</span></span></code></pre></div><p>Most of the time we will be using the ports 0–1023. The rest are for custom applications and system related ports.</p>
<p>Alright ports are cool and all, can I see which ports are in use on my Linux? Of course you can! Check out the command ‘ss’.</p>
<div class="highlight"><pre tabindex="0" style="color:#4d4d4d;background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#0080ff;font-style:italic"># The &#39;ss&#39; command has some options  </span>
</span></span><span style="display:flex;"><span>  
</span></span><span style="display:flex;"><span><span style="color:#0080ff;font-style:italic"># -a Shows all connections (listening or not)  </span>
</span></span><span style="display:flex;"><span><span style="color:#0080ff;font-style:italic"># -n Show IP and Port numbers (do not resolve DNS)  </span>
</span></span><span style="display:flex;"><span><span style="color:#0080ff;font-style:italic"># -t Show TCP connections  </span>
</span></span><span style="display:flex;"><span><span style="color:#0080ff;font-style:italic"># -u Show UDP connections  </span>
</span></span><span style="display:flex;"><span>  
</span></span><span style="display:flex;"><span>$ ss &lt;OPTIONS&gt;  
</span></span></code></pre></div><p><img src="ss-command-output.png" alt=""></p>
<p>‘ss’ Command Output</p>
<p>Here you can see that using the ‘ss’ command, we can get a pretty good amount of information about Linux network ports. Let’s analyze the output and discuss about them.</p>
<p>Starting from the left, we can see the ‘netid’ column. This can be either of the two values ‘udp’ or ‘tcp. We will talk about them soon enough. On it’s left we got the ‘state’ column. This tells us about the connection status. A port can be listening for connections and/or keeping a connection alive.</p>
<p>Recv-Q and Send-Q are waiting queues. This tells that how much data is waiting in the queue for that specific port.</p>
<p>Now we come to the important columns. Each network connection happens between two machines (we know this already). These machines have IPs and programs that makes the actual connection. We can see from the ‘ss’ command that which IP addresses are connected and in which ports.</p>
<p><img src="ip-and-port.png" alt=""></p>
<p>Every IP Address Must be Followed by a Port Number or Preceded by a Protocol Name</p>
<blockquote>
<p>From the ‘ss’ command output look at the line from the second bottom. It shows my current SSH connection. Local address is 192.168.1.31:22. It’s the SSH server. Peer address is 192.168.1.50:49933. And it’s my Macbook that made the connection (SSH client).</p>
</blockquote>
<h1 id="tcpudp-transport-layer">TCP/UDP (Transport Layer)</h1>
<p>Our packet is now ready thanks to the Application Layer. The packet type has been determined using a port number or a protocol name (like HTTP). Now it’s time to decide how to transfer it.</p>
<p>We have two options in front of us. We can either send the packet directly, without doing any checks or putting any type of limit whatsoever. Or we can make sure that the packet is correctly delivered by checking if the destination is available or not and monitoring the packet so that it safely delivered to it’s destination.</p>
<p>These two options are called UDP and TCP. Let’s take a closer look at them, shall we.</p>
<p><img src="boats-udp-tcp.png" alt=""></p>
<p>We Can Compare UDP to a Speed Boat and TCP to a Cargo Ship</p>
<h2 id="udp">UDP</h2>
<p>The first way to deliver a packet is to just send it. No validation, no checking, no control whatsoever! This type of network packet delivery is called User Datagram Protocol or UDP for short.</p>
<p>When an application wants to send the packet, it can choose the UDP to deliver it as fast as possible. Since there are no checks and controls, UDP provides us a really fast and low latency delivery.</p>
<blockquote>
<p>UDP does not establish a connection with the destination. For this reasons, it’s called a connectionless protocol.</p>
</blockquote>
<p><img src="video-game-udp.jpeg" alt=""></p>
<p>Almost All Online Games Uses UDP in Gameplay (Because of Low Latency) — Source: ign.com</p>
<blockquote>
<p>From our ‘captain’ story, we know that we have a ship. But what kind of a ‘ship’ do we have? It can be a super fast speedy boat (UDP) or a large container ship (TCP).</p>
</blockquote>
<p>Now this type of delivery is fast and is the simplest way to deliver a packet. But what about reliability? Can this option guarantees a 100% safe delivery? Well.. no. UDP might be fast and cool but it has no ‘thought processing’ whatsoever. It just send our packet to the open seas and never looks back!</p>
<p>In short, UDP offers fast delivery but not reliable one! I can’t trust UDP to deliver my ‘I love you’ message or to deliver my money transfer request.</p>
<h2 id="tcp">TCP</h2>
<p>Since I can’t trust UDP to do anything important, I need a safer way. Introducing; Transmission Control Protocol (TCP)!</p>
<p>This type of delivery is a smarter way to send a packet. Before it sends the packet, unlike UDP, it makes sure that the destination is online and ready to accept my packet.</p>
<blockquote>
<p>Unlike UDP, TCP does establish a connection. For this reasons it is more reliable and safer to use.</p>
</blockquote>
<p>TCP, talks with the destination before sending a packet. This way a connection is established between two machines. After a connection, the packet is expected and will be welcomed by the destination. This method is called a 3-way handshake.</p>
<p><img src="3-way-handshake-tcp.png" alt=""></p>
<p>3-Way Handshake Used by TCP (This Way A Connection is Established) — Source: dev.to</p>
<p>We can trust TCP that it will deliver our packet correctly and safely. But all this reliability comes with a cost. A typical TCP delivery includes error-checking, traffic flow control, 3-way handshake and more to deliver a packet safely. As you can guess, these operations will cause some latency and slower speed compared to UDP.</p>
<p><img src="udp-tcp-meme.jpeg" alt=""></p>
<p>TCP Might be More Reliable But UDP is Still Faster and Has Low Latency — Source: twitter.com</p>
<h1 id="ip-address-internet-layer">IP Address (Internet Layer)</h1>
<p>After deciding ‘how’ to send our packet either by UDP or TCP, we are now at the final step. The packet needs a destination address and ‘routed through the network. This is done via using the IP addresses and routing tables.</p>
<p>We have talked about IP addresses before. You can check out the previous part for more information about this layer.</p>
<h1 id="ones--zeroes-network-access-layer">Ones &amp; Zeroes (Network Access Layer)</h1>
<p>It’s now time to send the packet. This layers represents the hardware part of networking. A package needs to be converted from being a simple data/code to binary 1s and 0s. This is done via network interfaces.</p>
<p>We have talked about network interfaces before. You can check out the part 1 for more information about this layer.</p>
<h1 id="practice">Practice</h1>
<p>So far we have learned about the TCP/IP model. Now, let’s see it in action. I will be using a very popular network tool called ‘WireShark’. Using this tool, we can see how each of these layers work and see the actual packet and packages!</p>
<p>I have made very simple HTTP server using Flask. We will see how to make one in the next part don’t worry! For now, all we need to know is that this server listens on port 4001 and prints whatever we put in the packet</p>
<p><img src="http-packet.png" alt=""></p>
<p>Sending a Simple Packet With a “Hello” Text</p>
<p>Let’s see this packet in WireShark for further analysis.</p>
<p><img src="wireshark-output.png" alt=""></p>
<p>All of The Packets That Sent From a Simple “Hello” Text</p>
<p>As you can see from the above picture, there are many packets that being sent just for a simple HTTP requst! This is because we are using a TCP connection. Like we said previously, TCP protocol makes a connection before sending a packet and also makes sure the packet safely arrives at the destination.</p>
<p>Let’s focus on the ACTUAL packet (frame 8) for more details.</p>
<p><img src="wireshark-output-2.png" alt=""></p>
<p>This is All The Information Inside a Packet</p>
<p>From the above picture, we can make up the TCP/IP model from ground up.</p>
<div class="highlight"><pre tabindex="0" style="color:#4d4d4d;background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>Frame 8: The frame that was sent by the network interface (Network Access Layer)  
</span></span><span style="display:flex;"><span>Ethernet II Src: The machine that made the &#39;Frame 8&#39; request (Network Access Layer)  
</span></span><span style="display:flex;"><span>Internet Protocol Version 4: The IPv4 protocol (Internet Layer)  
</span></span><span style="display:flex;"><span>Transmission Control Protocol: The TCP protocol (Transport Layer)  
</span></span><span style="display:flex;"><span>Hypertext Transer Protocol: The HTTP protocol (Application Layer)  
</span></span><span style="display:flex;"><span>JavaScript Object Notation: The actual data &#34;Hello&#34; itself (My Message)
</span></span></code></pre></div><p>Okay this is cool! We can actually see the TCP/IP model being used in real-life thanks to WireShark. Of course, we can learn many more things about the packets that’s being sent over the network. But, for our purposes this is more than enough. If you want to learn more, check out the WireShark for youself. It’s a really good program for network learning purposes.</p>
<h1 id="firewalls">Firewalls</h1>
<p>Bonus topic! Let’s talk about firewalls for a bit. You probably have heard this term a lot (especially from Hollywood movies). But what is a firewall anyway? And is it really possible for ‘hackers’ to break it?</p>
<p>A firewall is a security system that controls access to a network or computer by monitoring and blocking incoming and outgoing network traffic.</p>
<p>It works by following a set configurations called ‘rules’. These rules define who is allowed to enter and who is not. For example, I can add a rule to my firewall that blocks all connections from the IP address ‘192.168.1.50’. Or I can deny any packets that uses the port number ‘80’. Below are the types of rules that can be given to a firewall.</p>
<div class="highlight"><pre tabindex="0" style="color:#4d4d4d;background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>Allow/Deny Incoming Requests From The IP &lt;IP_ADDR&gt;  
</span></span><span style="display:flex;"><span>Allow/Deny Outgoing Requests to The IP &lt;IP_ADDR&gt;  
</span></span><span style="display:flex;"><span>  
</span></span><span style="display:flex;"><span>Allow/Deny Incoming Requests From The Subnet &lt;SUBNET_ADDR&gt;  
</span></span><span style="display:flex;"><span>Allow/Deny Outgoing Requests to The Subnet &lt;SUBNET_ADDR&gt;  
</span></span><span style="display:flex;"><span>  
</span></span><span style="display:flex;"><span>Allow/Deny Incoming Requests to The Port Number &lt;PORT&gt;  
</span></span><span style="display:flex;"><span>Allow/Deny Outgoing Requests From The Port Number &lt;PORT&gt;
</span></span></code></pre></div><p>As you can see, there are many ways to configure a firewall. Generally, we want to block/deny all incoming requests and only allow some IPs or port numbers.</p>
<p>Let’s take an example. We can have Linux server that serves a Web Application on the port 443 (HTTPS). Ideally, we should deny all incoming/outgoing requests to every port, but 443. This way we will be having only one way into the system and that is through the port 443.</p>
<p>You probably know that we are using firewall to increase secuirty on a network or a machine. However, a firewall might cause issues if not used correctly.</p>
<blockquote>
<p>I have lost all access to my Cloud machine once, because I blocked all access to all ports ;( The only way in was to use the port 22 (SSH), but it was blocked by the firewall.</p>
</blockquote>
<h2 id="ufw">ufw</h2>
<p>We have many different ways/tools to implement a firewall. You can buy software tools from companies like ESET or Avast. Or you might use the one that comes with your OS (Windows or macOS). And in Linux, we have a tool called ‘ufw’ at our disposals. It is very simple, yet powerful!</p>
<p>Uncomplicated firewall, short for ‘ufw’, is a firewall tool that comes default with Linux systems. We can use this tool to increase our OS security by adding firewall rules.</p>
<p>First, things first. In order to use ‘ufw’ we need to check if it is enabled. If it is not, then we should enable it.</p>
<div class="highlight"><pre tabindex="0" style="color:#4d4d4d;background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#0080ff;font-style:italic"># Check the status of &#39;ufw&#39;  </span>
</span></span><span style="display:flex;"><span>$ sudo ufw status  
</span></span><span style="display:flex;"><span>  
</span></span><span style="display:flex;"><span><span style="color:#0080ff;font-style:italic"># Enable/disable &#39;ufw&#39;  </span>
</span></span><span style="display:flex;"><span>$ sudo ufw enable|disable
</span></span></code></pre></div><p><img src="ufw-command.png" alt=""></p>
<p>I have Enabled ‘ufw’ by Checking it’s Status First</p>
<p>By default, the ‘ufw’ will not have any rules and all incoming packets will be <strong>DENIED</strong> by the system! In my case, I am using the port 22 (SSH) to acces my Raspi. So, I will allow incoming connections to the port 22.</p>
<div class="highlight"><pre tabindex="0" style="color:#4d4d4d;background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#0080ff;font-style:italic"># Allow all access to a certain port number or a protocol  </span>
</span></span><span style="display:flex;"><span><span style="color:#0080ff;font-style:italic"># For example. I can type 22 or SSH to allow SSH connections  </span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>$ sudo ufw allow &lt;PORT_NO&gt;|&lt;PROTOCOL_NAME&gt;
</span></span></code></pre></div><p>I have Allowed All Access to The Port 22</p>
<p>Now, let’s make things interesting. I want to allow the IP 192.168.1.50 to access ports number 22 and 5000, but nothing else. And I also want to allow the IP 192.168.1.75 to access everything but the port number 22 and 5000. Let’s use ‘ufw’ to do it!</p>
<div class="highlight"><pre tabindex="0" style="color:#4d4d4d;background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#0080ff;font-style:italic"># Default behaviour is to DENY every IP from accessing any PORT  </span>
</span></span><span style="display:flex;"><span>$ sudo ufw default deny  
</span></span><span style="display:flex;"><span>  
</span></span><span style="display:flex;"><span><span style="color:#0080ff;font-style:italic"># Allow 192.168.1.50 to only access ports 22 and 5000  </span>
</span></span><span style="display:flex;"><span>$ sudo ufw allow from 192.168.1.50 to any port <span style="color:#5918bb;font-weight:bold">22</span>  
</span></span><span style="display:flex;"><span>$ sudo ufw allow from 192.168.1.50 to any port <span style="color:#5918bb;font-weight:bold">5000</span>  
</span></span><span style="display:flex;"><span>  
</span></span><span style="display:flex;"><span><span style="color:#0080ff;font-style:italic"># Allow 192.168.1.75 to acces all ports between 0-21, 23-4999 and 5001-65535  </span>
</span></span><span style="display:flex;"><span>$ sudo ufw allow proto tcp from 192.168.1.75 to any port 1:21,23:4999,5001:65535  
</span></span><span style="display:flex;"><span>$ sudo ufw allow proto udp from 192.168.1.75 to any port 1:21,23:4999,5001:65535
</span></span></code></pre></div><p><img src="ufw-command-3.png" alt=""></p>
<p>New Firewall Rules After Executing The Above Commands</p>
<p>You can see the newly added rules from the above image. Let’s test them.</p>
<p>I have an sshd server running on port 22 and two simple HTTP servers running on port 3000 and 5000.</p>
<h2 id="testing-rules-for-ip-address-192168150">Testing Rules For IP Address 192.168.1.50</h2>
<p><img src="test-ufw-rules.png" alt=""></p>
<p>The IP 192.168.50 Can Acces Ports 22 and 5000</p>
<p><img src="test-ufw-rules-2.png" alt=""></p>
<p>But it Can’t Access Port 3000 (Because The Firewall Blocks it)</p>
<h2 id="testing-rules-for-ip-address-192168175">Testing Rules For IP Address 192.168.1.75</h2>
<p><img src="test-ufw-rules-3.png" alt=""></p>
<p>The IP 192.168.1.75 Can’t Access Ports 22 and 5000</p>
<p><img src="test-ufw-rules-4.png" alt=""></p>
<p>But it Can Access Other Ports Such as 3000</p>
<h1 id="closing-words">Closing Words</h1>
<p>So far, we have learned many terms, topics and commands in this article. Let’s summarize them all.</p>
<p>We have started by talking about a story about a ‘captain and it’s ship’. We compared it to the ports used in Linux (and other operating systems). There were many different port numbers and they each had their purposes such as for HTTP and SSH protocols. Later, we dived into TCP/IP model and explained each layer by giving examples and further explaining new networking terms. These terms was UDP and TCP. We learned about these protocol and the differences between them. And finally closed this article by talking about firewalls and giving example use cases.</p>
<p>Congrulations! You have made it this far into the Linux Networking ELI5 series. I’m giving you my biggest respects and hugs. We are almost nearing to the final article. In the next (and final) part, we will be building a Minecraft and an HTTP server using the informations learn from this series. It will be entertaining and informative!</p>
<p>Lastly, I hope that you liked my article and learned something new. If you spot any errors or mistakes please, do let me know.</p>
<p>Take care ❤</p>

    </div>
	<div class="post-footer">
		<hr />

		<img src="/blog/signature.png" alt="signature" style="height: 55px;" />

		<p>Thanks for reading & Take care <span style="font-style: normal;"> ❤ </span></p>
		<p>
			Follow me on
			<a href="https://twitter.com/tunacicii">X (formerly Twitter)</a>,
      if you like my works that is >.&lt;
		</p>

	</div>
  </article>

  <hr />

  <div id="footer-post-container">
  <div id="footer-post">

    <div id="nav-footer" style="display: none">
      <ul>
         
          <li><a href="/blog/">Home</a></li>
         
          <li><a href="/blog/memes/">Memes</a></li>
         
          <li><a href="/blog/about/">About</a></li>
         
          <li><a href="/blog/contact/">Contact</a></li>
         
          <li><a href="https://tunacici.com/terminal/">Terminal</a></li>
        
      </ul>
    </div>

    <div id="toc-footer" style="display: none">
      <nav id="TableOfContents">
  <ul>
    <li><a href="#udp">UDP</a></li>
    <li><a href="#tcp">TCP</a></li>
  </ul>

  <ul>
    <li><a href="#ufw">ufw</a></li>
    <li><a href="#testing-rules-for-ip-address-192168150">Testing Rules For IP Address 192.168.1.50</a></li>
    <li><a href="#testing-rules-for-ip-address-192168175">Testing Rules For IP Address 192.168.1.75</a></li>
  </ul>
</nav>
    </div>

    <div id="share-footer" style="display: none">
      
      <ul>
  
  
    
  
  
  <li>
    <a class="icon" href="http://www.facebook.com/sharer.php?u=https%3a%2f%2ftunacici.com%2fblog%2f2023%2f01%2flinux-networking-eli5-part-3-ports-tcp%2fip-firewalls%2f">
      <i class="fab fa-facebook fa-lg" aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="https://twitter.com/share?url=https%3a%2f%2ftunacici.com%2fblog%2f2023%2f01%2flinux-networking-eli5-part-3-ports-tcp%2fip-firewalls%2f&text=Linux%20Networking%20ELI5%20%e2%80%94%20Part%203%2c%20Ports%2c%20TCP%2fIP%20%26%20Firewalls">
      <i class="fab fa-twitter fa-lg" aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2ftunacici.com%2fblog%2f2023%2f01%2flinux-networking-eli5-part-3-ports-tcp%2fip-firewalls%2f&title=Linux%20Networking%20ELI5%20%e2%80%94%20Part%203%2c%20Ports%2c%20TCP%2fIP%20%26%20Firewalls">
      <i class="fab fa-linkedin fa-lg" aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=https%3a%2f%2ftunacici.com%2fblog%2f2023%2f01%2flinux-networking-eli5-part-3-ports-tcp%2fip-firewalls%2f&is_video=false&description=Linux%20Networking%20ELI5%20%e2%80%94%20Part%203%2c%20Ports%2c%20TCP%2fIP%20%26%20Firewalls">
      <i class="fab fa-pinterest fa-lg" aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="mailto:?subject=Linux%20Networking%20ELI5%20%e2%80%94%20Part%203%2c%20Ports%2c%20TCP%2fIP%20%26%20Firewalls&body=Check out this article: https%3a%2f%2ftunacici.com%2fblog%2f2023%2f01%2flinux-networking-eli5-part-3-ports-tcp%2fip-firewalls%2f">
      <i class="fas fa-envelope fa-lg" aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="https://getpocket.com/save?url=https%3a%2f%2ftunacici.com%2fblog%2f2023%2f01%2flinux-networking-eli5-part-3-ports-tcp%2fip-firewalls%2f&title=Linux%20Networking%20ELI5%20%e2%80%94%20Part%203%2c%20Ports%2c%20TCP%2fIP%20%26%20Firewalls">
      <i class="fab fa-get-pocket fa-lg" aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="http://reddit.com/submit?url=https%3a%2f%2ftunacici.com%2fblog%2f2023%2f01%2flinux-networking-eli5-part-3-ports-tcp%2fip-firewalls%2f&title=Linux%20Networking%20ELI5%20%e2%80%94%20Part%203%2c%20Ports%2c%20TCP%2fIP%20%26%20Firewalls">
      <i class="fab fa-reddit fa-lg" aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="http://www.stumbleupon.com/submit?url=https%3a%2f%2ftunacici.com%2fblog%2f2023%2f01%2flinux-networking-eli5-part-3-ports-tcp%2fip-firewalls%2f&title=Linux%20Networking%20ELI5%20%e2%80%94%20Part%203%2c%20Ports%2c%20TCP%2fIP%20%26%20Firewalls">
      <i class="fab fa-stumbleupon fa-lg" aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="http://digg.com/submit?url=https%3a%2f%2ftunacici.com%2fblog%2f2023%2f01%2flinux-networking-eli5-part-3-ports-tcp%2fip-firewalls%2f&title=Linux%20Networking%20ELI5%20%e2%80%94%20Part%203%2c%20Ports%2c%20TCP%2fIP%20%26%20Firewalls">
      <i class="fab fa-digg fa-lg" aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="http://www.tumblr.com/share/link?url=https%3a%2f%2ftunacici.com%2fblog%2f2023%2f01%2flinux-networking-eli5-part-3-ports-tcp%2fip-firewalls%2f&name=Linux%20Networking%20ELI5%20%e2%80%94%20Part%203%2c%20Ports%2c%20TCP%2fIP%20%26%20Firewalls&description=Welcome%20to%20the%20part%203%20of%20my%20Linux%20Networking%20ELI5%20series%21%20In%20the%20previous%20article%2c%20we%20have%20talked%20about%20IP%20addresses%2c%20the%20idea%20behind%20the%20NAT%20and%20DHCP%20servers.%0aToday%e2%80%99s%20stars%20are%20TCP%2fIP%20model%2c%20ports%20and%20firewalls.%20We%20will%20try%20to%20answer%20what%20they%20are%2c%20how%20do%20they%20work%20and%20how%20to%20use%20them%20in%20our%20Linux%20machines.%20Unlike%20the%20previous%20articles%2c%20this%20one%20will%20be%20more%20software%20centric.%20Meaning%2c%20there%20will%20be%20many%20terminal%20commands%20and%20practical%20examples.">
      <i class="fab fa-tumblr fa-lg" aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="https://news.ycombinator.com/submitlink?u=https%3a%2f%2ftunacici.com%2fblog%2f2023%2f01%2flinux-networking-eli5-part-3-ports-tcp%2fip-firewalls%2f&t=Linux%20Networking%20ELI5%20%e2%80%94%20Part%203%2c%20Ports%2c%20TCP%2fIP%20%26%20Firewalls">
      <i class="fab fa-hacker-news fa-lg" aria-hidden="true"></i>
    </a>
  </li>
</ul>

    </div>

    <div id="actions-footer">
      
        <a id="menu" class="icon" href="#" onclick="$('#nav-footer').toggle();return false;">
          <i class="fas fa-bars fa-lg" aria-hidden="true"></i> Menu</a>
        <a id="toc" class="icon" href="#" onclick="$('#toc-footer').toggle();return false;">
          <i class="fas fa-list fa-lg" aria-hidden="true"></i> TOC</a>
        <a id="share" class="icon" href="#" onclick="$('#share-footer').toggle();return false;">
          <i class="fas fa-share-alt fa-lg" aria-hidden="true"></i> share</a>
        <a id="top" style="display:none" class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');">
          <i class="fas fa-chevron-up fa-lg" aria-hidden="true"></i> Top</a>
    </div>

  </div>
</div>


  <footer id="footer">
  <div class="footer-left">
    Pasteleft &#9752; 2023  tunacici 
  </div>
  <div class="footer-right">
    <nav>
      <ul>
         
        <li><a href="/blog/">Home</a></li>
         
        <li><a href="/blog/memes/">Memes</a></li>
         
        <li><a href="/blog/about/">About</a></li>
         
        <li><a href="/blog/contact/">Contact</a></li>
         
        <li><a href="https://tunacici.com/terminal/">Terminal</a></li>
        
      </ul>
    </nav>
  </div>
</footer>


  </div>
</body>

<link rel="stylesheet" href=/blog/lib/font-awesome/css/all.min.css>
<script src=/blog/lib/jquery/jquery.min.js></script>
<script src=/blog/js/main.js></script>



</html>
